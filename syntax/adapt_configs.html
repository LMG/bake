<!DOCTYPE html>


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Adapt configs &mdash; bake documentation</title>
    
    <link rel="stylesheet" href="../_static/basic.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootswatch-3.3.4/sandstone/bootstrap.min.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-sphinx.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/js/jquery-1.11.0.min.js"></script>
    <script type="text/javascript" src="../_static/js/jquery-fix.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-3.3.4/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-sphinx.js"></script>
    <link rel="shortcut icon" href="../_static/logo_tiny_32.ico"/>
    <link rel="top" title="bake documentation" href="../index.html" />
    <link rel="up" title="Syntax" href="syntax.html" />
    <link rel="next" title="Auto-adjustment of paths to existing projects" href="auto_adjustment.html" />
    <link rel="prev" title="Derive configs" href="derive_configs.html" />
<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">

  </head>
  <body role="document">

  <div id="navbar" class="navbar navbar-default navbar-fixed-top">
    <div class="container">
      <div class="navbar-header">
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="../index.html"><img src="../_static/logo_tiny_48.png">
           </a>
        <span class="navbar-text navbar-version pull-left"><b></b></span>
      </div>

        <div class="collapse navbar-collapse nav-collapse">
          <ul class="nav navbar-nav">
            
            
              <li class="dropdown globaltoc-container">
  <a role="button"
     id="dLabelGlobalToc"
     data-toggle="dropdown"
     data-target="#"
     href="../index.html">Section <b class="caret"></b></a>
  <ul class="dropdown-menu globaltoc"
      role="menu"
      aria-labelledby="dLabelGlobalToc"><ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../why_bake/why_bake.html">Why you should use bake</a></li>
<li class="toctree-l1"><a class="reference internal" href="../install/install_bake.html">Install bake</a></li>
<li class="toctree-l1"><a class="reference internal" href="../quickstart/quickstart.html">Quickstart</a></li>
<li class="toctree-l1"><a class="reference internal" href="../concepts/concepts.html">Concepts</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="syntax.html">Syntax</a></li>
<li class="toctree-l1"><a class="reference internal" href="../commandline/commandline.html">Commandline</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ide/ide_integrations.html">IDE Support</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tips_and_tricks/tips_and_tricks.html">Additional features</a></li>
<li class="toctree-l1"><a class="reference internal" href="../performance/performance.html">Performance</a></li>
<li class="toctree-l1"><a class="reference internal" href="../known_issues.html">Known Issues</a></li>
<li class="toctree-l1"><a class="reference internal" href="../changelog.html">Changelog</a></li>
<li class="toctree-l1"><a class="reference internal" href="../license.html">License</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../internal.html">Internal developing notes</a></li>
</ul>
</ul>
</li>
              
                <li class="dropdown">
  <a role="button"
     id="dLabelLocalToc"
     data-toggle="dropdown"
     data-target="#"
     href="#">SubSections <b class="caret"></b></a>
  <ul class="dropdown-menu localtoc"
      role="menu"
      aria-labelledby="dLabelLocalToc"><ul>
<li><a class="reference internal" href="#">Adapt configs</a><ul>
<li><a class="reference internal" href="#introduction">Introduction</a></li>
<li><a class="reference internal" href="#from-command-line">From command line</a></li>
<li><a class="reference internal" href="#from-project-meta">From Project.meta</a></li>
<li><a class="reference internal" href="#conditions-and-effectiveness">Conditions and effectiveness</a><ul>
<li><a class="reference internal" href="#condition">Condition</a></li>
<li><a class="reference internal" href="#effectiveness">Effectiveness</a></li>
</ul>
</li>
<li><a class="reference internal" href="#occurrences">Occurrences</a></li>
<li><a class="reference internal" href="#apply-order">Apply order</a></li>
<li><a class="reference internal" href="#types">Types</a><ul>
<li><a class="reference internal" href="#type-extend">Type: extend</a></li>
<li><a class="reference internal" href="#type-remove">Type: remove</a></li>
<li><a class="reference internal" href="#type-replace">Type: replace</a></li>
</ul>
</li>
<li><a class="reference internal" href="#wildcards">Wildcards</a></li>
</ul>
</li>
</ul>
</ul>
</li>
              
            
            
              
                
  <li>
    <a href="derive_configs.html" title="Previous Chapter: Derive configs"><span class="glyphicon glyphicon-chevron-left visible-sm"></span><span class="hidden-sm hidden-tablet">&laquo; Derive configs</span>
    </a>
  </li>
  <li>
    <a href="auto_adjustment.html" title="Next Chapter: Auto-adjustment of paths to existing projects"><span class="glyphicon glyphicon-chevron-right visible-sm"></span><span class="hidden-sm hidden-tablet">Auto-adjustme... &raquo;</span>
    </a>
  </li>
              
            
            
            
            
          </ul>

          
            
<form class="navbar-form navbar-right" action="../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
          
        </div>
    </div>
  </div>

<div class="container">
  <div class="row">
    <div class="col-md-12">
      
  <div class="section" id="adapt-configs">
<span id="adapt-reference"></span><h1>Adapt configs<a class="headerlink" href="#adapt-configs" title="Permalink to this headline">¶</a></h1>
<div class="section" id="introduction">
<h2>Introduction<a class="headerlink" href="#introduction" title="Permalink to this headline">¶</a></h2>
<p>There are two major use cases:</p>
<ul class="simple">
<li>Changing the configs from outside, e.g. injecting a toolchain.</li>
<li>Changing the configs depending on variables like the operating system.</li>
</ul>
<p>Both is possible with the <em>Adapt</em> feature.</p>
</div>
<div class="section" id="from-command-line">
<h2>From command line<a class="headerlink" href="#from-command-line" title="Permalink to this headline">¶</a></h2>
<p>If you want to manipulate existing configs without changing them, you can &#8220;adapt&#8221; them via command line.</p>
<div class="highlight-console"><div class="highlight"><pre><span class="gp">User@Host:~$</span> bake <span class="nb">test</span> --adapt abc
</pre></div>
</div>
<p>bake searches for abc/Adapt.meta within the workspace roots. If found, the configs from the Adapt.meta are parsed:</p>
<div class="highlight-text"><div class="highlight"><pre>Adapt {
  ExecutableConfig ... # 0..n
  LibraryConfig ... # 0..n
  CustomConfig ... # 0..n
}
</pre></div>
</div>
<p>Here is an example to change the DefaultToolchain (details explained below):</p>
<div class="highlight-text"><div class="highlight"><pre>Adapt {
  ExecutableConfig test, project: __MAIN__, type: replace {
    DefaultToolchain GCC
  }
}
</pre></div>
</div>
</div>
<div class="section" id="from-project-meta">
<h2>From Project.meta<a class="headerlink" href="#from-project-meta" title="Permalink to this headline">¶</a></h2>
<p>You can do the same within the Project.meta:</p>
<div class="highlight-text"><div class="highlight"><pre>Project {
  ...
}
Adapt {
  ...
}
Adapt {
  ...
}
</pre></div>
</div>
</div>
<div class="section" id="conditions-and-effectiveness">
<h2>Conditions and effectiveness<a class="headerlink" href="#conditions-and-effectiveness" title="Permalink to this headline">¶</a></h2>
<p>Be aware, these are two different things but look very similar.</p>
<div class="section" id="condition">
<h3>Condition<a class="headerlink" href="#condition" title="Permalink to this headline">¶</a></h3>
<p>An <em>Adapt</em> can have up to four attributes:</p>
<ul class="simple">
<li><strong>toolchain</strong>: e.g. GCC</li>
<li><strong>os</strong>: can be Windows, Mac, Linux, Unix (which is != Linux)</li>
<li><strong>mainConfig</strong>: name of the main config</li>
<li><strong>mainProject</strong>: name of the main project</li>
</ul>
<p>The &#8220;Adapt* configs will be only applied if all these attributes are either empty or true. Example:</p>
<div class="highlight-text"><div class="highlight"><pre>Adapt toolchain: GCC, os: Windows {
  ...
}
</pre></div>
</div>
<p>Here the <em>Adapt</em> configs will be applied if toolchain is GCC on Windows.</p>
</div>
<div class="section" id="effectiveness">
<h3>Effectiveness<a class="headerlink" href="#effectiveness" title="Permalink to this headline">¶</a></h3>
<p>The <em>Adapt</em> configs can be applied to all configs from regular build. This can be controlled by the config names and the project attributes.
Remember the example from the beginning?</p>
<div class="highlight-text"><div class="highlight"><pre>Adapt {
  ExecutableConfig test, project: __MAIN__, type: replace {
    DefaultToolchain GCC
  }
}
</pre></div>
</div>
<p>This config is applied only to the config &#8220;test&#8221; of the main project.</p>
<p>__MAIN__, __ALL__ and __THIS__ are keywords:</p>
<ul class="simple">
<li><strong>__MAIN__</strong> means the main project or main config</li>
<li><strong>__ALL__</strong> means all projects or configs</li>
<li><strong>__THIS__</strong> is only valid for project name, which can be used for <em>Adapts</em> within a Project.meta to restrict the adaption to the current project.</li>
</ul>
<p>If you want to apply the changes only to the top level config, write:</p>
<div class="highlight-text"><div class="highlight"><pre>ExecutableConfig __MAIN__, project: __MAIN__, ...
</pre></div>
</div>
<p>If you want to apply the changes to all configs, write:</p>
<div class="highlight-text"><div class="highlight"><pre>ExecutableConfig __ALL__, project: __ALL__, ...
</pre></div>
</div>
<p>It is possible to mix the keywords with reals project or config names.</p>
</div>
</div>
<div class="section" id="occurrences">
<h2>Occurrences<a class="headerlink" href="#occurrences" title="Permalink to this headline">¶</a></h2>
<p>You can specify more configs in one <em>Adapt</em> and you can specify more than one Adapt.meta file:</p>
<div class="highlight-text"><div class="highlight"><pre>Adapt {
  ExecutableConfig ..., project: ..., type: ... {
    ...
  }
  ExecutableConfig ..., project: ..., type: ... {
    ...
  }
  LibraryConfig ..., project: ..., type: ... {
    ...
  }
  ...
}
</pre></div>
</div>
<div class="highlight-console"><div class="highlight"><pre><span class="gp">User@Host:~$</span> bake <span class="nb">test</span> --adapt abc --adapt xy
</pre></div>
</div>
</div>
<div class="section" id="apply-order">
<h2>Apply order<a class="headerlink" href="#apply-order" title="Permalink to this headline">¶</a></h2>
<p>The <em>Adapt</em> configs will be applied in the order in which they were parsed. First the Adapt.metas referenced from the command line are read. Then the Project.metas are read
one by one as usual. If an <em>Adapt</em> is found, it will be appended to the list of <em>Adapts</em>. Note, <em>Adapts</em> will be applied immediately when a Project.meta is read.</p>
<p>If you inject a Toolchain from outside, e.g. &#8220;&#8211;adapt gcc&#8221;, you can use the toolchain info for local <em>Adapts</em>:</p>
<div class="highlight-text"><div class="highlight"><pre>Project {
  ...
}
Adapt toolchain: GCC {
  ...
}
</pre></div>
</div>
</div>
<div class="section" id="types">
<h2>Types<a class="headerlink" href="#types" title="Permalink to this headline">¶</a></h2>
<p>It is possible to specify the type of adaption:</p>
<div class="highlight-text"><div class="highlight"><pre>ExecutableConfig ..., type: replace
</pre></div>
</div>
<p>The type can be</p>
<ul class="simple">
<li><strong>replace</strong></li>
<li><strong>remove</strong></li>
<li><strong>extend</strong></li>
</ul>
<div class="section" id="type-extend">
<h3>Type: extend<a class="headerlink" href="#type-extend" title="Permalink to this headline">¶</a></h3>
<p>This works exactly like for <a class="reference internal" href="derive_configs.html"><em>Derive configs</em></a>.</p>
</div>
<div class="section" id="type-remove">
<h3>Type: remove<a class="headerlink" href="#type-remove" title="Permalink to this headline">¶</a></h3>
<p>If parent elements can be found which matches to the child elements, they will be removed.</p>
<p>Example project config:</p>
<div class="highlight-text"><div class="highlight"><pre>ExecutableConfig test {
  DefaultToolchain GCC
}
</pre></div>
</div>
<p>Example <em>Adapt</em> configs:</p>
<div class="highlight-text"><div class="highlight"><pre>ExecutableConfig __ALL__, project: __ALL__, type: remove {
  DefaultToolchain # remove ok
}

ExecutableConfig __ALL__, project: __ALL__, type: remove {
  DefaultToolchain GCC # remove ok
}

ExecutableConfig __ALL__, project: __ALL__, type: remove {
  DefaultToolchain Diab # remove NOT ok
}

ExecutableConfig __ALL__, project: __ALL__, type: remove {
  DefaultToolchain GCC, eclipseOrder: true # remove NOT ok
}
</pre></div>
</div>
</div>
<div class="section" id="type-replace">
<h3>Type: replace<a class="headerlink" href="#type-replace" title="Permalink to this headline">¶</a></h3>
<p>This is for convenience. &#8220;replace&#8221; will remove all elements with the same type and extends the configs.</p>
<p>Example:</p>
<div class="highlight-text"><div class="highlight"><pre>ExecutableConfig __ALL__, project: __ALL__, type: replace {
  Files &quot;*.cpp&quot;
  DefaultToolchain GCC {
    Linker command: &quot;link.exe&quot;
  }
}
</pre></div>
</div>
<p>This removes all &#8220;Files&#8221; and the &#8220;DefaultToolchain&#8221; from the original config regardless their attributes and replaces them by the elements of the <em>Adapt</em> config.</p>
</div>
</div>
<div class="section" id="wildcards">
<h2>Wildcards<a class="headerlink" href="#wildcards" title="Permalink to this headline">¶</a></h2>
<p>The &#8220;*&#8221; wildcard is allowed:</p>
<div class="highlight-text"><div class="highlight"><pre>Adapt mainProject: HERE, mainConfig: HERE ... {
  SomeConfig HERE, project: HERE ... {
    ....
  }
}
</pre></div>
</div>
<p>Example (the configs of the Adapt are applied if the main config name starts with &#8220;UnitTest&#8221;):</p>
<div class="highlight-text"><div class="highlight"><pre>Adapt mainConfig: &quot;UnitTest*&quot; {
  ...
}
</pre></div>
</div>
</div>
</div>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
    <p class="pull-right">
      <a href="#">Back to top</a>
      
    </p>
    <p>
        &copy; Copyright 2016, E.S.R.Labs AG.<br/>
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.3.1.<br/>
    </p>
  </div>
</footer>
  </body>
</html>